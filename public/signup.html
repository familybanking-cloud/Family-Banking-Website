<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Signup</title>
  <style>
    body { background: #d21616; font-family: sans-serif; color:#fff; }
    .signup-section { max-width:400px; margin:50px auto; background:#000; padding:30px; border-radius:10px; }
    input, button { width:100%; padding:10px; margin:10px 0; border-radius:5px; }
    button { background:#ffdd00; color:#000; border:none; cursor:pointer; font-weight:bold; }
    button:hover { background:#ff0000; color:#fff; }
    label { display:block; cursor:pointer; }
  </style>
</head>
<body>

<div class="signup-section">
  <h2>Sign Up</h2>
  <input type="text" id="signupName" placeholder="Full Name" required>
  <input type="email" id="signupEmail" placeholder="Email" required>
  <input type="text" id="signupUsername" placeholder="Username" required>
  <input type="password" id="signupPassword" placeholder="Password" required>
  <input type="password" id="signupConfirmPassword" placeholder="Confirm Password" required>
  <label><input type="checkbox" id="showSignupPassword"> Show Passwords</label>
  <button id="signupBtn">Sign Up</button>
  <p>Already have an account? <a href="index.html">Login</a></p>
  <p id="message" style="color:red;"></p>
</div>

<script>
window.onload = () => {
  const msg = document.getElementById("message");

  document.getElementById("showSignupPassword").addEventListener("change", function() {
    const pass = document.getElementById("signupPassword");
    const confirmPass = document.getElementById("signupConfirmPassword");
    pass.type = confirmPass.type = this.checked ? "text" : "password";
  });

  document.getElementById("signupBtn").addEventListener("click", async function() {
    msg.textContent = "";

    const fullname = document.getElementById("signupName").value.trim();
    const email = document.getElementById("signupEmail").value.trim();
    const username = document.getElementById("signupUsername").value.trim();
    const password = document.getElementById("signupPassword").value;
    const confirmPassword = document.getElementById("signupConfirmPassword").value;

    if(!fullname || !email || !username || !password || !confirmPassword){
      msg.textContent = "Please fill all fields"; return;
    }
    if(password !== confirmPassword){
      msg.textContent = "Passwords do not match"; return;
    }

    try {
      const res = await fetch("/signup", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ fullname, email, username, password })
      });
      const data = await res.json();

      if (data.success) {
  alert(data.message); // "Signup successful! You can now log in."
  window.location.href = "/index.html"; // Correct redirect
} else {
  msg.textContent = data.message;
}
    } catch(err) {
      console.error(err);
      msg.textContent = "Signup error. Contact Administrator.";
    }
  });
};
</script>



</body>
</html>
